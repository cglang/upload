!function(){function e(e){return function(e){if(Array.isArray(e))return t(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,r){if(!e)return;if("string"==typeof e)return t(e,r);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return t(e,r)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function t(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}System.register(["./index-legacy-793243b8.js"],(function(t,r){"use strict";var n,a,i,o,l,s,u,f,c,d,p,h,v,m,g=document.createElement("style");return g.textContent=".wrapper[data-v-f29ff6e5]{height:250px;border:1px dashed #DEDEDE;border-radius:4px}.table-wrapper[data-v-f29ff6e5]{overflow:scroll;height:200px}.drag[data-v-f29ff6e5]{height:100%;display:flex;align-items:center;flex-direction:column;justify-content:center}thead tr:nth-child(1) th[data-v-f29ff6e5]{background:white;position:sticky;top:0;z-index:10}.active[data-v-f29ff6e5]{border:1px dashed #2260FF}.title[data-v-f29ff6e5]{font-size:14px}.subtile[data-v-f29ff6e5]{font-size:12px;color:#999;margin-top:30px;text-align:center;line-height:unset}\n",document.head.appendChild(g),{setters:[function(e){n=e._,a=e.a,i=e.c,o=e.w,l=e.g,s=e.b,u=e.F,f=e.r,c=e.n,d=e.j,p=e.o,h=e.t,v=e.p,m=e.i}],execute:function(){var r={data:function(){return{files:[],active:!1}},methods:{addFile:function(t){var r=this;this.active=!1,e(t.dataTransfer.items).forEach((function(e){var t=e.webkitGetAsEntry();t&&r.traverseFileTree(t)}))},traverseFileTree:function(e,t){var r=this;if(t=t||"",e.isFile)e.file((function(e){r.files.push(e)}));else if(e.isDirectory){e.createReader().readEntries((function(n){for(var a=0;a<n.length;a++)r.traverseFileTree(n[a],t+e.name+"/")}))}},removeFile:function(e){this.files=this.files.filter((function(t){return t!=e}))},upload:function(){var e=this;this.$root.message.title="上传进度";var t=new Modal(this.$root.$refs.progressModal);t.show();var r=new FormData;r.append("currentDirectory","/public/"),this.files.forEach((function(e){r.append("files",e)}));var n=(new Date).getTime(),i=0;a({method:"post",url:"file/upload",data:r,headers:{"Content-Type":"multipart/form-data"},onUploadProgress:function(t){var r=t.loaded,a=t.total;e.$root.progress=Math.round(r/a*100)+"%";var o=(new Date).getTime(),l=(o-n)/1e3,s=l?(r-i)/l:0;i=r,n=o,e.$root.speed=e.$root.formatBytes(s)+"/s"}}).then((function(r){r.success?(t.hide(),e.files=[],e.$root.showModal("成功","上传成功"),e.$root.progress=0):(t.hide(),e.$root.showModal("失败",r.msg),e.$root.progress=0)})).catch((function(r){t.hide(),e.$root.showModal("错误",r.message),e.$root.progress=0}))}}},g=function(e){return v("data-v-f29ff6e5"),e=e(),m(),e},b={class:"drag"},y=[g((function(){return s("p",{class:"title"},"未选择文件/文件夹",-1)})),g((function(){return s("p",{class:"subtile"},"支持拖拽到此区域上传，支持选择多个文件/文件夹",-1)}))],w={class:"table-wrapper"},x={class:"table table-sm"},$=g((function(){return s("thead",null,[s("tr",null,[s("th",null,"#"),s("th",null,"文件名"),s("th",null,"大小"),s("th",null,"操作")])],-1)})),F=["onClick"],D=[g((function(){return s("i",{class:"bi bi-trash"},null,-1)}))],k={class:"text-center"};t("default",n(r,[["render",function(e,t,r,n,a,v){return p(),i("div",{class:c(["wrapper",{active:a.active}]),onDrop:t[1]||(t[1]=d((function(){return v.addFile&&v.addFile.apply(v,arguments)}),["prevent"])),onDragenter:t[2]||(t[2]=d((function(e){return a.active=!0}),["prevent"])),onDragover:t[3]||(t[3]=d((function(e){return a.active=!0}),["prevent"])),onDragleave:t[4]||(t[4]=d((function(e){return a.active=!1}),["prevent"]))},[o(s("div",b,y,512),[[l,0==a.files.length]]),o(s("div",null,[s("div",w,[s("table",x,[$,s("tbody",null,[(p(!0),i(u,null,f(a.files,(function(t,r){return p(),i("tr",{key:r},[s("td",null,h(r+1),1),s("td",null,[s("i",null,h(t.webkitRelativePath?t.webkitRelativePath:t.name),1)]),s("td",null,h(e.$root.formatBytes(t.size)),1),s("td",null,[s("a",{class:"link-danger",onClick:function(e){return v.removeFile(t)}},D,8,F)])])})),128))])])]),s("div",k,[s("button",{class:"btn btn-sm btn-outline-primary mt-2",onClick:t[0]||(t[0]=function(){return v.upload&&v.upload.apply(v,arguments)})},"上传文件")])],512),[[l,0!=a.files.length]])],34)}],["__scopeId","data-v-f29ff6e5"]]))}}}))}();
