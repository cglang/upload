!function(){function t(t,n){return function(t){if(Array.isArray(t))return t}(t)||function(t,o){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,e,i,l,a=[],s=!0,u=!1;try{if(i=(n=n.call(t)).next,0===o){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=i.call(n)).done)&&(a.push(r.value),a.length!==o);s=!0);}catch(c){u=!0,e=c}finally{try{if(!s&&null!=n.return&&(l=n.return(),Object(l)!==l))return}finally{if(u)throw e}}return a}}(t,n)||function(t,n){if(!t)return;if("string"==typeof t)return o(t,n);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return o(t,n)}(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(t,o){(null==o||o>t.length)&&(o=t.length);for(var n=0,r=new Array(o);n<o;n++)r[n]=t[n];return r}System.register(["./index-legacy-793243b8.js","./FileSaver.min-legacy-47251a66.js"],(function(o,n){"use strict";var r,e,i,l,a,s,u,c,d,f,h,m,p,g,b=document.createElement("style");return b.textContent=".icon[data-v-f67ea821]{width:auto;height:15px;margin-right:10px;vertical-align:middle}@media screen and (max-width: 768px){.url[data-v-f67ea821]{display:none}}\n",document.head.appendChild(b),{setters:[function(t){r=t._,e=t.a,i=t.l,l=t.c,a=t.b,s=t.w,u=t.v,c=t.e,d=t.F,f=t.r,h=t.o,m=t.t,p=t.p,g=t.i},null],execute:function(){var n={data:function(){return{bookmarks:{},url:""}},methods:{isJSON:function(t){try{return JSON.parse(t)&&!!t}catch(o){return!1}},extractDomain:function(t){try{return new URL(t).hostname}catch(o){return null}},list:function(){var t=this;this.$root.loading=!0,e.post("bookmark/list").then((function(o){o.success?t.bookmarks=o.detail:t.$root.showModal("失败",o.msg)})).catch((function(o){t.$root.showModal("错误",o.message)})).finally((function(){t.$root.loading=!1}))},add:function(){var t=this;0!==this.url.trim().length?(this.$root.loading=!0,e.post("bookmark/add",i.stringify({url:this.url})).then((function(o){o.success?(t.list(),t.update(o.detail)):t.$root.showModal("添加失败",o.msg)})).catch((function(o){t.$root.showModal("错误",o.message)})).finally((function(){t.url="",t.$root.loading=!1}))):this.$root.showModal("提示","URL不能为空")},remove:function(t){var o=this;this.$root.hasToken((function(){return o.remove(t)}))&&(this.$root.loading=!0,e.post("bookmark/delete",i.stringify({id:t})).then((function(t){t.success?(o.$root.showModal("成功","删除成功"),o.list()):o.$root.showModal("失败","删除失败")})).catch((function(t){o.$root.showModal("错误",t.message)})).finally((function(){o.$root.loading=!1})))},rename:function(t){var o=this;0!==this.$root.$refs.input.value.trim().length?(this.$root.loading=!0,e.post("bookmark/rename",i.stringify({id:t,title:this.$root.$refs.input.value})).then((function(t){t.success?(o.$root.showModal("成功","修改成功"),o.list()):o.$root.showModal("失败","修改失败")})).catch((function(t){o.$root.showModal("错误",t.message)})).finally((function(){o.$root.loading=!1}))):this.$root.showModal("提示","标题不能为空")},update:function(t){var o=this;this.$root.loading=!0,e.post("bookmark/update",i.stringify({id:t})).then((function(t){t.success?(o.$root.showModal("成功","更新成功"),o.list()):o.$root.showModal("失败","更新失败")})).catch((function(t){o.$root.showModal("错误",t.message)})).finally((function(){o.$root.loading=!1}))},importBookmarks:function(t){var o=this;this.$root.loading=!0;var n=new FileReader;n.readAsText(t.target.files[0]),n.onload=function(t){var n=t.target.result;if(!o.isJSON(n))return o.$root.showModal("错误","不是合法的json数据"),void(o.$root.loading=!1);e.post("bookmark/bulkAdd",i.stringify({data:n})).then((function(t){t.success?(o.list(),o.$root.showModal("成功",t.msg)):o.$root.showModal("失败",t.msg)})).catch((function(t){o.$root.showModal("错误",t.message)})).finally((function(){o.$root.loading=!1}))}},exportBookmarks:function(){this.$root.loading=!0;for(var o=[],n=0,r=Object.entries(this.bookmarks);n<r.length;n++){var e=t(r[n],2),i=(e[0],e[1]),l=new Object;l.title=i.title,l.url=i.url,o.push(l)}var a=JSON.stringify(o,null,2),s=new Blob([a],{type:"text/plain;charset=utf-8"});saveAs(s,"bookmarks.json"),this.$root.loading=!1},updateAll:function(){var t=this;this.$root.loading=!0,e.post("bookmark/updateAll").then((function(o){o.success?(t.list(),t.$root.showModal("成功",o.msg)):t.$root.showModal("失败",o.msg)})).catch((function(o){t.$root.showModal("错误",o.message)})).finally((function(){t.$root.loading=!1}))}},mounted:function(){this.list()}},b=function(t){return p("data-v-f67ea821"),t=t(),g(),t},y={class:"input-group mb-2"},w=["disabled"],k=["disabled"],$=["disabled"],v=b((function(){return a("i",{class:"bi bi-three-dots-vertical"},null,-1)})),x={class:"dropdown-menu"},M=b((function(){return a("li",null,[a("a",{class:"dropdown-item",onclick:"document.getElementById('file').value=null; document.getElementById('file').click()"},"导入")],-1)})),C={class:"table table-hover table-borderless border shadow-sm"},j={class:"text-truncate",style:{"max-width":"200px"}},A=["src"],S={key:1,class:"icon",src:"/vite.svg"},O={key:2,class:"align-middle"},B={key:3,class:"align-middle text-muted"},I={class:"text-truncate url",style:{"max-width":"200px"}},E={class:"text-muted"},J={class:"text-end",style:{width:"10%"}},N={class:"dropdown d-inline"},U=b((function(){return a("i",{class:"bi bi-three-dots-vertical link-primary","data-bs-toggle":"dropdown"},null,-1)})),_={class:"dropdown-menu"},F=["href"],R=["data-clipboard-text"],T=b((function(){return a("li",null,[a("hr",{class:"dropdown-divider"})],-1)})),D=["onClick"],L=["onClick"],K=["onClick"];o("default",r(n,[["render",function(t,o,n,r,e,i){return h(),l(d,null,[a("input",{type:"file",name:"file",id:"file",class:"d-none",onChange:o[0]||(o[0]=function(t){return i.importBookmarks(t)}),multiple:""},null,32),a("div",y,[s(a("input",{class:"form-control","onUpdate:modelValue":o[1]||(o[1]=function(t){return e.url=t}),onKeyup:o[2]||(o[2]=c((function(t){return i.add()}),["enter"])),disabled:t.$root.loading},null,40,w),[[u,e.url]]),a("button",{class:"btn btn-outline-primary",onClick:o[3]||(o[3]=function(t){return i.add()}),disabled:t.$root.loading},"添加",8,k),a("button",{class:"btn btn-outline-primary","data-bs-toggle":"dropdown",disabled:t.$root.loading},[v,a("ul",x,[M,a("li",null,[a("a",{class:"dropdown-item",onClick:o[4]||(o[4]=function(t){return i.exportBookmarks()})},"导出")]),a("li",null,[a("a",{class:"dropdown-item",onClick:o[5]||(o[5]=function(t){return i.updateAll()})},"更新")])])],8,$)]),a("table",C,[a("tbody",null,[(h(!0),l(d,null,f(e.bookmarks,(function(o){return h(),l("tr",{key:o},[a("td",j,[o.icon?(h(),l("img",{key:0,class:"icon",src:"data:image/jpeg;base64,"+o.icon},null,8,A)):(h(),l("img",S)),o.title?(h(),l("span",O,m(o.title),1)):(h(),l("span",B,[a("i",null,m(i.extractDomain(o.url)),1)]))]),a("td",I,[a("i",E,m(o.url),1)]),a("td",J,[a("div",N,[U,a("ul",_,[a("li",null,[a("a",{class:"dropdown-item",href:o.url,target:"_blank"},"打开",8,F)]),a("li",null,[a("a",{class:"dropdown-item",id:"btnCopy","data-clipboard-text":o.url},"复制",8,R)]),T,a("li",null,[a("a",{class:"dropdown-item",onClick:function(n){return t.$root.showConfirm((function(){return i.remove(o.id)}))}},"删除",8,D)]),a("li",null,[a("a",{class:"dropdown-item",onClick:function(n){return t.$root.showInput("修改标题","输入新标题",(function(){i.rename(o.id)}))}},"修改",8,L)]),a("li",null,[a("a",{class:"dropdown-item",onClick:function(t){return i.update(o.id)}},"更新",8,K)])])])])])})),128))])])],64)}],["__scopeId","data-v-f67ea821"]]))}}}))}();
