!function(){function e(e){return function(e){if(Array.isArray(e))return t(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,r){if(!e)return;if("string"==typeof e)return t(e,r);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return t(e,r)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function t(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}System.register(["./index-legacy-e82f7a63.js"],(function(t,r){"use strict";var n,a,i,o,l,s,c,u,d,f,p,h,v,m,b=document.createElement("style");return b.textContent=".wrapper[data-v-ca2a73eb]{height:250px;border:1px dashed #dedede;border-radius:4px}.table-wrapper[data-v-ca2a73eb]{overflow:scroll;height:200px}.drag[data-v-ca2a73eb]{height:100%;display:flex;align-items:center;flex-direction:column;justify-content:center}thead tr:nth-child(1) th[data-v-ca2a73eb]{background:white;position:sticky;top:0;z-index:10}.active[data-v-ca2a73eb]{border:1px dashed #2260ff}.title[data-v-ca2a73eb]{font-size:14px}.subtile[data-v-ca2a73eb]{font-size:12px;color:#999;margin-top:30px;text-align:center;line-height:unset}\n",document.head.appendChild(b),{setters:[function(e){n=e._,a=e.a,i=e.c,o=e.b,l=e.w,s=e.g,c=e.F,u=e.r,d=e.n,f=e.j,p=e.o,h=e.t,v=e.p,m=e.i}],execute:function(){var r={data:function(){return{files:[],active:!1}},methods:{addFile:function(t){var r=this;this.active=!1,e(t.dataTransfer.items).forEach((function(e){var t=e.webkitGetAsEntry();t&&r.traverseFileTree(t)}))},addFromClick:function(e){var t=this;Array.from(e.target.files).forEach((function(e){t.files.push(e)}))},traverseFileTree:function(e,t){var r=this;if(t=t||"",e.isFile)e.file((function(e){r.files.push(e)}));else if(e.isDirectory){e.createReader().readEntries((function(n){for(var a=0;a<n.length;a++)r.traverseFileTree(n[a],t+e.name+"/")}))}},removeFile:function(e){this.files=this.files.filter((function(t){return t!=e}))},upload:function(){var e=this;this.$root.message.title="上传进度";var t=new Modal(this.$root.$refs.progressModal);t.show();var r=new FormData;r.append("currentDirectory","/public/"),this.files.forEach((function(e){r.append("files",e)}));var n=(new Date).getTime(),i=0;a({method:"post",url:"file/upload",data:r,headers:{"Content-Type":"multipart/form-data"},onUploadProgress:function(t){var r=t.loaded,a=t.total;e.$root.progress=Math.round(r/a*100)+"%";var o=(new Date).getTime(),l=(o-n)/1e3,s=l?(r-i)/l:0;i=r,n=o,e.$root.speed=e.$root.formatBytes(s)+"/s"}}).then((function(r){r.success?(t.hide(),e.files=[],e.$root.showModal("成功","上传成功"),e.$root.progress=0):(t.hide(),e.$root.showModal("失败",r.msg),e.$root.progress=0)})).catch((function(r){t.hide(),e.$root.showModal("错误",r.message),e.$root.progress=0}))}}},b=function(e){return v("data-v-ca2a73eb"),e=e(),m(),e},g={class:"drag cursor-pointer",onclick:"document.getElementById('file').value = null; document.getElementById('file').click()"},y=[b((function(){return o("p",{class:"title"},"未选择文件/文件夹",-1)})),b((function(){return o("p",{class:"subtile"},"支持拖拽到此区域上传，支持选择多个文件/文件夹",-1)}))],w={class:"table-wrapper"},x={class:"table table-sm"},k=b((function(){return o("thead",null,[o("tr",null,[o("th",null,"#"),o("th",null,"文件名"),o("th",null,"大小"),o("th",null,"操作")])],-1)})),$=["onClick"],F=[b((function(){return o("i",{class:"bi bi-trash"},null,-1)}))],C={class:"text-center"};t("default",n(r,[["render",function(e,t,r,n,a,v){return p(),i("div",{class:d(["wrapper",{active:a.active}]),onDrop:t[2]||(t[2]=f((function(){return v.addFile&&v.addFile.apply(v,arguments)}),["prevent"])),onDragenter:t[3]||(t[3]=f((function(e){return a.active=!0}),["prevent"])),onDragover:t[4]||(t[4]=f((function(e){return a.active=!0}),["prevent"])),onDragleave:t[5]||(t[5]=f((function(e){return a.active=!1}),["prevent"]))},[o("input",{type:"file",name:"file",id:"file",class:"d-none",onChange:t[0]||(t[0]=function(e){return v.addFromClick(e)}),multiple:""},null,32),l(o("div",g,y,512),[[s,0==a.files.length]]),l(o("div",null,[o("div",w,[o("table",x,[k,o("tbody",null,[(p(!0),i(c,null,u(a.files,(function(t,r){return p(),i("tr",{key:r},[o("td",null,h(r+1),1),o("td",null,[o("i",null,h(t.webkitRelativePath?t.webkitRelativePath:t.name),1)]),o("td",null,h(e.$root.formatBytes(t.size)),1),o("td",null,[o("a",{class:"link-danger",onClick:function(e){return v.removeFile(t)}},F,8,$)])])})),128))])])]),o("div",C,[o("button",{class:"btn btn-sm btn-outline-primary mt-2",onClick:t[1]||(t[1]=function(){return v.upload&&v.upload.apply(v,arguments)})}," 上传文件 ")])],512),[[s,0!=a.files.length]])],34)}],["__scopeId","data-v-ca2a73eb"]]))}}}))}();
