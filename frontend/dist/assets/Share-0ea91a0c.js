import{_ as h,a as c,l as _,c as o,b as s,F as u,r as p,o as a,t as d,d as f,p as b,i as g}from"./index-2461a6dc.js";const m={data(){return{codes:{}}},methods:{list(){this.$root.loading=!0,c.post("/shareCode/list").then(t=>{t.success?this.codes=t.detail:this.$root.showModal("失败",t.msg)}).catch(t=>{this.$root.showModal("错误",t.message)}).finally(()=>{this.$root.loading=!1})},remove(t){this.$root.hasToken(()=>this.remove(t))&&(this.$root.loading=!0,c.post("/shareCode/delete",_.stringify({code:t})).then(l=>{l.success?(this.list(),this.$root.showModal("成功","删除成功")):this.$root.showModal("失败",l.msg)}).catch(l=>{this.$root.showModal("错误",l.message)}).finally(()=>{this.$root.loading=!1}))},getLink(t){return window.location.protocol+"//"+window.location.host+"/files/"+t}},created(){this.list()}},i=t=>(b("data-v-0ef38eb1"),t=t(),g(),t),k={class:"table"},y=i(()=>s("thead",null,[s("tr",null,[s("th",null,"分享码"),s("th",null,"文件路径"),s("th",{class:"status"},"状态"),s("th",null,"操作")])],-1)),$={class:"code"},w={class:"text-truncate filePath"},v={class:"status"},x={key:0,class:"badge text-bg-success"},C={key:1,class:"badge text-bg-danger"},S=["data-clipboard-text"],M=i(()=>s("i",{class:"bi bi-clipboard"},null,-1)),I=[M],B=["onClick"],L=i(()=>s("i",{class:"bi bi-trash"},null,-1)),F=[L];function N(t,l,V,D,r,n){return a(),o("table",k,[y,s("tbody",null,[(a(!0),o(u,null,p(r.codes,e=>(a(),o("tr",{key:e},[s("td",$,[s("i",null,d(e.code),1)]),s("td",w,[s("i",null,d(e.path),1)]),s("td",v,[e.valid?(a(),o("span",x,"有效")):(a(),o("span",C,"无效"))]),s("td",null,[e.valid?(a(),o("a",{key:0,class:"link-primary me-1",id:"btnCopy","data-clipboard-text":n.getLink(e.code)},I,8,S)):f("",!0),s("a",{class:"link-danger",onClick:E=>{t.$root.showConfirm(function(){n.remove(e.code)})}},F,8,B)])]))),128))])])}const T=h(m,[["render",N],["__scopeId","data-v-0ef38eb1"]]);export{T as default};
