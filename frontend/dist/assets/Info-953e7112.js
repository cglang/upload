import{_,a as d,c as r,b as s,F as h,r as f,o as a,t as l}from"./index-17d4d99b.js";const g={data(){return{info:{},config:{}}},methods:{list(){this.$root.loading=!0,d.post("/info").then(t=>{t.success?this.info=t.detail:this.$root.showModal("失败",t.msg)}).catch(t=>{this.$root.showModal("错误",t.message)}).finally(()=>{this.$root.loading=!1})},listConfig(){this.$root.loading=!0,d.post("/config/get").then(t=>{t.success?this.config=t.detail:this.$root.showModal("失败",t.msg)}).catch(t=>{this.$root.showModal("错误",t.message)}).finally(()=>{this.$root.loading=!1})},update(t,i){this.$root.loading=!0,d.post("/config/set",{key:t,value:i}).then(o=>{o.success?(this.$root.showModal("成功","修改成功"),this.listConfig()):this.$root.showModal("失败",o.msg)}).catch(o=>{this.$root.showModal("错误",o.message)}).finally(()=>{this.$root.loading=!1})},showDetails(t){this.$root.showModal("查看",t)},parseValue(t){if(t==="true"||t==="false")return t==="true";if(!isNaN(t))return parseInt(t);if(t.includes(",")){var i=t.split(",").map(o=>this.parseValue(o.trim())).filter(o=>o!=null&&o!==void 0&&o.length!=0&&o.length!=null);return console.log(i),console.log(i[1]),i}return t}},created(){},mounted(){this.list(),this.listConfig()}},m=s("h2",{class:"pt-2 pb-2 border-bottom"},"服务器信息",-1),w={class:"row row-cols-4 g-4 py-4"},b={class:"card rounded-3 shadow-sm",style:{"min-height":"10rem"}},$={class:"card-body"},y={class:"card-title text-primary"},v={class:"card-text"},x=s("h2",{class:"pt-2 pb-2 border-bottom"},"配置信息",-1),M={class:"row row-cols-4 g-4 py-4"},C={class:"card rounded-3 shadow-sm",style:{"min-height":"10rem"}},V={class:"card-body"},k={class:"card-title text-primary"},B={class:"card-text",style:{"min-height":"3rem","max-height":"3rem",overflow:"hidden","text-overflow":"ellipsis","white-space":"nowrap"}},D={class:"d-flex justify-content-between align-items-center"},I={class:"btn-group"},N=["onClick"],E=["onClick"];function F(t,i,o,j,u,c){return a(),r(h,null,[m,s("div",w,[(a(!0),r(h,null,f(u.info,(n,e)=>(a(),r("div",{class:"col",key:e},[s("div",b,[s("div",$,[s("h5",y,l(e),1),s("p",v,l(n),1)])])]))),128))]),x,s("div",M,[(a(!0),r(h,null,f(u.config,(n,e)=>(a(),r("div",{class:"col",key:e},[s("div",C,[s("div",V,[s("h5",k,l(e),1),s("p",B,l(n),1),s("div",D,[s("div",I,[s("button",{type:"button",class:"btn btn-sm btn-outline-primary",onClick:p=>c.showDetails(n)}," View ",8,N),s("button",{type:"button",class:"btn btn-sm btn-outline-primary",onClick:p=>{t.$root.inputValue=n,t.$root.showInput("修改配置","输入配置项【"+e+"】的新值",function(){c.update(e,c.parseValue(t.$root.$refs.input.value))})}}," Edit ",8,E)])])])])]))),128))])],64)}const S=_(g,[["render",F]]);export{S as default};
